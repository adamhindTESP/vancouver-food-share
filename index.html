<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>üçÖ Vancouver Food Share</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      background: #f8f9fa;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      margin: 16px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    button, input, select {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
    button {
      background: #10b981;
      color: white;
      font-weight: 600;
      border: none;
    }
    button.secondary {
      background: #6b7280;
    }
    button:disabled {
      background: #9ca3af;
    }
    .notice {
      background: #fff3cd;
      border-left: 4px solid #f59e0b;
      padding: 12px;
      border-radius: 8px;
      margin-top: 12px;
      font-size: 14px;
    }
    .guardian {
      text-align: center;
      font-size: 13px;
      color: #6b7280;
    }
    .food-item {
      background: #f0fdf4;
      border-left: 4px solid #10b981;
      padding: 12px;
      border-radius: 8px;
      margin: 8px 0;
    }
    .link {
      color: #2563eb;
      text-decoration: underline;
      cursor: pointer;
      font-size: 14px;
    }
  </style>
</head>

<body>

<!-- HEADER -->
<div class="card">
  <h1>üçÖ Vancouver Food Share</h1>
  <p>Safe public pickup only. Drop food ‚Üí list it ‚Üí anyone can pick up.</p>
  <div class="notice">
    <strong>Pilot project.</strong> Locations below are manually verified.
    Please use safe, public pickup points only.
  </div>
</div>

<!-- VERIFIED LOCATIONS -->
<div class="card">
  <h3>üìç Verified Pickup Locations</h3>
  <ul style="margin-top:8px; padding-left:18px;">
    <li><strong>Kitsilano Fridge</strong> ‚Äî Alley behind 3066 W 13th Ave</li>
    <li><strong>Victoria Drive Fridge</strong> ‚Äî Alley behind 4040 Victoria Dr</li>
    <li><strong>Main Street Fridge</strong> ‚Äî 3718 Main St (Buzz to enter)</li>
    <li><strong>Food Stash Fridge</strong> ‚Äî Alley at E 4th & Scotia</li>
    <li><strong>East Hastings LOAF</strong> ‚Äî 2297 E Hastings St</li>
  </ul>
</div>

<!-- ROLE SELECT -->
<div class="card" id="role">
  <h3>What brings you here?</h3>
  <button onclick="showGive()">ü•¨ I Have Food</button>
  <button onclick="showGet()">ü•ó I Need Food</button>
</div>

<!-- GIVE MODE -->
<div class="card" id="give" style="display:none;">
  <button class="secondary" onclick="back()">‚Üê Back</button>
  <h3>Drop Food ‚Üí List It</h3>

  <input id="foodDesc" placeholder="e.g. apples, bread, vegetables" />
  <select id="location">
    <option value="">Choose location‚Ä¶</option>
    <option>Kitsilano Fridge</option>
    <option>Victoria Drive Fridge</option>
    <option>Main Street Fridge</option>
    <option>Food Stash Fridge</option>
    <option>East Hastings LOAF</option>
  </select>

  <label>
    <input type="checkbox" id="confirmDrop" /> Food is already dropped off
  </label>

  <button id="listBtn" disabled onclick="addFood()">List for pickup</button>
</div>

<!-- GET MODE -->
<div class="card" id="get" style="display:none;">
  <button class="secondary" onclick="back()">‚Üê Back</button>
  <button onclick="renderFood()">Refresh</button>

  <h3>Food Listings</h3>
  <select id="people" onchange="renderFood()">
    <option value="1">1 person</option>
    <option value="2">2 people</option>
    <option value="3">3 people</option>
    <option value="4">4 people</option>
  </select>

  <div id="limit" class="notice"></div>
  <div id="listings"></div>
</div>

<!-- STORAGE PARTNER -->
<div class="card">
  <span class="link" onclick="toggleSponsor()">Are you a place that can store food?</span>
  <div id="sponsor" style="display:none; margin-top:12px;">
    <input placeholder="Place name" />
    <input placeholder="Address / neighbourhood" />
    <select>
      <option>Has a fridge</option>
      <option>No fridge</option>
    </select>
    <button disabled>Apply (pilot)</button>
  </div>
</div>

<div class="guardian">
  üõ°Ô∏è Guardian active ¬∑ Fair-share limits ¬∑ No accounts ¬∑ No tracking
</div>

<script>
  const food = JSON.parse(localStorage.getItem("food") || "[]");

  document.getElementById("confirmDrop").onchange = e =>
    document.getElementById("listBtn").disabled = !e.target.checked;

  function showGive() {
    role.style.display = "none";
    give.style.display = "block";
  }
  function showGet() {
    role.style.display = "none";
    get.style.display = "block";
    renderFood();
  }
  function back() {
    give.style.display = get.style.display = "none";
    role.style.display = "block";
  }
  function toggleSponsor() {
    sponsor.style.display = sponsor.style.display === "none" ? "block" : "none";
  }
  function addFood() {
    food.unshift({
      item: foodDesc.value,
      loc: location.value,
      time: new Date().toLocaleString()
    });
    localStorage.setItem("food", JSON.stringify(food));
    foodDesc.value = "";
    location.value = "";
    confirmDrop.checked = false;
    listBtn.disabled = true;
    showGet();
  }
  function renderFood() {
    const p = parseInt(people.value);
    limit.innerHTML = `You may take up to <strong>${(p*2.5).toFixed(1)}kg</strong> today (pilot max 4 people).`;
    listings.innerHTML = food.length
      ? food.map(f => `<div class="food-item"><strong>${f.item}</strong><br>${f.loc}<br>${f.time}</div>`).join("")
      : "<em>No food available right now.</em>";
  }
</script>

</body>
</html>
